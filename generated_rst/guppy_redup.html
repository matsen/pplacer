<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>redup &mdash; pplacer v1.1.alpha19-4-g1189285 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'v1.1.alpha19-4-g1189285',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="pplacer v1.1.alpha19-4-g1189285 documentation" href="../index.html" />
    <link rel="up" title="guppy" href="guppy.html" />
    <link rel="next" title="round" href="guppy_round.html" />
    <link rel="prev" title="rarefy" href="guppy_rarefy.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="guppy_round.html" title="round"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="guppy_rarefy.html" title="rarefy"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pplacer v1.1.alpha19-4-g1189285 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="guppy.html" accesskey="U">guppy</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">redup</a><ul>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#details">Details</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="guppy_rarefy.html"
                        title="previous chapter">rarefy</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="guppy_round.html"
                        title="next chapter">round</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/generated_rst/guppy_redup.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="redup">
<span id="guppy-redup"></span><h1>redup<a class="headerlink" href="#redup" title="Permalink to this headline">¶</a></h1>
<p><cite>redup</cite> restores duplicates to deduped placefiles.</p>
<div class="highlight-python"><div class="highlight"><pre>usage: redup -d dupfile placefile
</pre></div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-o</span></kbd></td>
<td>Specify the filename to write to.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--out-dir</span></kbd></td>
<td>Specify the directory to write files to.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--prefix</span></kbd></td>
<td>Specify a string to be prepended to filenames.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-d</span></kbd></td>
<td>The dedup file to use to restore duplicates.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-m</span></kbd></td>
<td>If specified, redup with counts instead of a name list.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--as-mass</span></kbd></td>
<td>If specified, add mass instead of names to each pquery.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<p>From placefiles generated by running <code class="docutils literal"><span class="pre">pplacer</span></code> on a deduplicated sequence
file, restore duplicated sequences to the placefiles.</p>
<p>A script is included to deduplicate sequences: <a class="reference internal" href="../scripts.html#deduplicate-sequences"><span>deduplicate_sequences.py</span></a>:</p>
<div class="highlight-python"><div class="highlight"><pre>scripts/deduplicate_sequences.py --deduplicated-sequences-file sample.dedup sample.fasta sample_deduped.fasta
pplacer -c sample.refpkg sample_deduped.fasta
guppy redup -d sample.dedup --prefix reduped_ sample_deduped.jplace
</pre></div>
</div>
<p>If you wish to use <a class="reference internal" href="guppy.html#split-placefiles"><span>&#8216;Split&#8217; placefiles</span></a> in <code class="docutils literal"><span class="pre">guppy</span></code> analysis, specify a map
using <code class="docutils literal"><span class="pre">--split-map</span></code>, and at least one read from each group will be added to
dedup file, and added in <code class="docutils literal"><span class="pre">guppy</span> <span class="pre">redup</span></code>. By default, duplicate sequences are
reduced to a single sequence per split with mass totalling all the identical
sequences within the split. If you want to retain all sequence IDs after
reduplicating, use the <code class="docutils literal"><span class="pre">--keep-ids</span></code> flag.</p>
<p>The format for dedup files is very simple, for ease of reading and writing.
Each dedup file is just a CSV file with three columns: the sequence name in the
deduplicated file, the name to put in the reduplicated file, and the mass
associated with the latter name. For most purposes, the ingoing mass will
simply be the number of reads. For example with the following dedup file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">A_0</span><span class="p">,</span><span class="n">A_0</span><span class="p">,</span><span class="mi">1</span>
<span class="n">A_0</span><span class="p">,</span><span class="n">A_1</span><span class="p">,</span><span class="mi">3</span>
<span class="n">A_0</span><span class="p">,</span><span class="n">A_2</span><span class="p">,</span><span class="mi">1</span>
<span class="n">B_0</span><span class="p">,</span><span class="n">B_0</span><span class="p">,</span><span class="mi">1</span>
<span class="n">C_0</span><span class="p">,</span><span class="n">C_0</span><span class="p">,</span><span class="mi">2</span>
<span class="n">C_0</span><span class="p">,</span><span class="n">C_1</span><span class="p">,</span><span class="mi">2</span>
</pre></div>
</div>
<p>For one set of name/mass pairs, the transformation done is:</p>
<div class="highlight-python"><div class="highlight"><pre>[A_0, 1] -&gt; [A_0, 1; A_1, 3; A_2, 1]
[B_0, 1] -&gt; [B_0, 1]
[C_0, 1] -&gt; [C_0, 2; C_1, 2]
</pre></div>
</div>
<p>And a more complicated example:</p>
<div class="highlight-python"><div class="highlight"><pre>[A_0, 2; B_0, 1] -&gt; [A_0, 2; A_1, 6; A_2, 2; B_0, 1]
[C_0, 0.5] -&gt; [C_0, 1; C_1, 1]
[D_0, 1] -&gt; [D_0, 1]
</pre></div>
</div>
<p>Sequences with no changes need not be present in the dedup file.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="guppy_round.html" title="round"
             >next</a> |</li>
        <li class="right" >
          <a href="guppy_rarefy.html" title="rarefy"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">pplacer v1.1.alpha19-4-g1189285 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="guppy.html" >guppy</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2011-2014, Matsen Group.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>